'use strict';

module.exports = {
  async up(queryInterface, Sequelize) {
    try {
      console.log('üîß –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –∑–∞–¥–∞–Ω–∏–π...');
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ —É–∂–µ –∑–∞–¥–∞–Ω–∏—è
      const [results] = await queryInterface.sequelize.query(
        'SELECT COUNT(*) as count FROM assignments'
      );
      
      if (results[0].count > 0) {
        console.log('‚ö†Ô∏è –ó–∞–¥–∞–Ω–∏—è —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É...');
        console.log(`üìã –ù–∞–π–¥–µ–Ω–æ –∑–∞–¥–∞–Ω–∏–π: ${results[0].count}`);
        return;
      }
      
      console.log('‚úÖ –¢–∞–±–ª–∏—Ü–∞ assignments –ø—É—Å—Ç–∞—è, –∑–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è...');
      
      return await queryInterface.bulkInsert('assignments', [
        {
          id: 1,
          operatorId: 4, // employee1 - –ê–ª–µ–∫—Å–µ–π –ò–≤–∞–Ω–æ–≤ (–∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä –∫–∞—á–µ—Å—Ç–≤–∞)
          shiftDate: new Date('2024-08-14'),
          taskDescription: '–¢–æ–∫–∞—Ä–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ—Ä–ø—É—Å–∞ –ø–æ–¥—à–∏–ø–Ω–∏–∫–æ–≤–æ–≥–æ —É–∑–ª–∞. –í—ã–ø–æ–ª–Ω–∏—Ç—å –æ–±—Ç–∞—á–∏–≤–∞–Ω–∏–µ –Ω–∞—Ä—É–∂–Ω—ã—Ö –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π —Å–æ–≥–ª–∞—Å–Ω–æ —á–µ—Ä—Ç–µ–∂—É. –ö–æ–Ω—Ç—Ä–æ–ª—å —Ä–∞–∑–º–µ—Ä–æ–≤ –∫–∞–∂–¥—ã–µ 10 –¥–µ—Ç–∞–ª–µ–π.',
          machineNumber: '–¢–°-101',
          detailName: '–ö–æ—Ä–ø—É—Å –ø–æ–¥—à–∏–ø–Ω–∏–∫–æ–≤–æ–≥–æ —É–∑–ª–∞',
          customerName: '–û–û–û –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã',
          plannedQuantity: 50,
          actualQuantity: 35, // –°–º–µ–Ω–∞ –µ—â–µ –Ω–µ –∑–∞–∫–æ–Ω—á–µ–Ω–∞
          techCardId: 1, // –°—Å—ã–ª–∫–∞ –Ω–∞ —Ç–µ—Ö–∫–∞—Ä—Ç—É –∫–æ—Ä–ø—É—Å–∞
          createdAt: new Date(),
          updatedAt: new Date()
        },
        {
          id: 2,
          operatorId: 5, // employee2 - –ú–∏—Ö–∞–∏–ª –ö–æ–∑–ª–æ–≤ (—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—é)
          shiftDate: new Date('2024-08-14'),
          taskDescription: '–†–∞—Å—Ç–æ—á–∫–∞ –æ—Ç–≤–µ—Ä—Å—Ç–∏–π –≤ —Ä–æ–ª–∏–∫–æ–≤–æ–º –º–µ—Ö–∞–Ω–∏–∑–º–µ –ø–æ–¥ –ø–æ–¥—à–∏–ø–Ω–∏–∫–∏ 6204. –û–±–µ—Å–ø–µ—á–∏—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å –ø–æ—Å–∞–¥–æ—á–Ω—ã—Ö –º–µ—Å—Ç. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–ª–∏–±—Ä–∞–º–∏ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –¥–µ—Ç–∞–ª–∏.',
          machineNumber: '–†–°-205',
          detailName: '–†–æ–ª–∏–∫–æ–≤—ã–π –º–µ—Ö–∞–Ω–∏–∑–º',
          customerName: '–ê–û –ú–∞—à–∏–Ω–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ',
          plannedQuantity: 25,
          actualQuantity: 25, // –ó–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
          techCardId: 2, // –°—Å—ã–ª–∫–∞ –Ω–∞ —Ç–µ—Ö–∫–∞—Ä—Ç—É —Ä–æ–ª–∏–∫–æ–≤–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞
          createdAt: new Date(),
          updatedAt: new Date()
        },
        {
          id: 3,
          operatorId: 4, // employee1 - –ê–ª–µ–∫—Å–µ–π –ò–≤–∞–Ω–æ–≤
          shiftDate: new Date('2024-08-13'),
          taskDescription: '–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏–≤–æ–¥–Ω–æ–≥–æ –≤–∞–ª–∞. –ö–ª–∞—Å—Å —Ç–æ—á–Ω–æ—Å—Ç–∏ G6.3. –ü–æ—Å–ª–µ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ - –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ –∏ —É–ø–∞–∫–æ–≤–∫–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–∫–∞–∑—á–∏–∫—É.',
          machineNumber: '–ë–°-301',
          detailName: '–ü—Ä–∏–≤–æ–¥–Ω–æ–π –≤–∞–ª',
          customerName: '–ü–ê–û –õ–æ–≥–∏—Å—Ç–∏–∫–∞',
          plannedQuantity: 15,
          actualQuantity: 15, // –ó–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é
          techCardId: 3, // –°—Å—ã–ª–∫–∞ –Ω–∞ —Ç–µ—Ö–∫–∞—Ä—Ç—É –ø—Ä–∏–≤–æ–¥–Ω–æ–≥–æ –≤–∞–ª–∞
          createdAt: new Date(),
          updatedAt: new Date()
        },
        {
          id: 4,
          operatorId: 5, // employee2 - –ú–∏—Ö–∞–∏–ª –ö–æ–∑–ª–æ–≤
          shiftDate: new Date('2024-08-15'), // –ó–∞–≤—Ç—Ä–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ
          taskDescription: '–§—Ä–µ–∑–µ—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Ä—É–∂–Ω—ã—Ö –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π –∫–æ—Ä–ø—É—Å–∞. –ß–µ—Ä–Ω–æ–≤–∞—è –∏ —á–∏—Å—Ç–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞. –û—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ –∫ —à–µ—Ä–æ—Ö–æ–≤–∞—Ç–æ—Å—Ç–∏ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ Ra 3.2.',
          machineNumber: '–§–°-102',
          detailName: '–ö–æ—Ä–ø—É—Å –ø–æ–¥—à–∏–ø–Ω–∏–∫–æ–≤–æ–≥–æ —É–∑–ª–∞',
          customerName: '–û–û–û –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã',
          plannedQuantity: 40,
          actualQuantity: null, // –ó–∞–¥–∞–Ω–∏–µ –µ—â–µ –Ω–µ –Ω–∞—á–∞—Ç–æ
          techCardId: 1,
          createdAt: new Date(),
          updatedAt: new Date()
        },
        {
          id: 5,
          operatorId: 4, // employee1 - –ê–ª–µ–∫—Å–µ–π –ò–≤–∞–Ω–æ–≤
          shiftDate: new Date('2024-08-12'), // –í—á–µ—Ä–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ
          taskDescription: '–ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ –≥–æ—Ç–æ–≤—ã—Ö —Ä–æ–ª–∏–∫–æ–≤—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤, –∑–∞–∑–æ—Ä–æ–≤ –ø–æ–¥—à–∏–ø–Ω–∏–∫–æ–≤, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å—Ç–µ–Ω–¥–µ. –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è.',
          machineNumber: '–ö–°-401',
          detailName: '–†–æ–ª–∏–∫–æ–≤—ã–π –º–µ—Ö–∞–Ω–∏–∑–º',
          customerName: '–ê–û –ú–∞—à–∏–Ω–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ',
          plannedQuantity: 30,
          actualQuantity: 28, // 2 –¥–µ—Ç–∞–ª–∏ –∑–∞–±—Ä–∞–∫–æ–≤–∞–Ω—ã
          techCardId: 2,
          createdAt: new Date(),
          updatedAt: new Date()
        },
        {
          id: 6,
          operatorId: 3, // master1 - –°–µ—Ä–≥–µ–π –°–∏–¥–æ—Ä–æ–≤ (–º–∞—Å—Ç–µ—Ä)
          shiftDate: new Date('2024-08-14'),
          taskDescription: '–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–∫–∞—Ä–Ω–æ–≥–æ —Å—Ç–∞–Ω–∫–∞ –¢–°-101 –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–æ–≤–æ–π –ø–∞—Ä—Ç–∏–∏ –≤–∞–ª–æ–≤. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞, –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ß–ü–£, –ø–µ—Ä–≤–∞—è –¥–µ—Ç–∞–ª—å –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å.',
          machineNumber: '–¢–°-101',
          detailName: '–ü—Ä–∏–≤–æ–¥–Ω–æ–π –≤–∞–ª',
          customerName: '–ó–ê–û –ú–µ—Ç–∞–ª–ª—É—Ä–≥–∏—è',
          plannedQuantity: 5, // –ù–∞—Å—Ç—Ä–æ–µ—á–Ω–∞—è –ø–∞—Ä—Ç–∏—è
          actualQuantity: 3, // –í –ø—Ä–æ—Ü–µ—Å—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
          techCardId: 3,
          createdAt: new Date(),
          updatedAt: new Date()
        }
      ], {});
      
    } catch (error) {
      console.error('‚ùå –î–ï–¢–ê–õ–¨–ù–ê–Ø –û–®–ò–ë–ö–ê –≤ Assignments Seeder:');
      console.error('–°–æ–æ–±—â–µ–Ω–∏–µ:', error.message);
      console.error('–¢–∏–ø –æ—à–∏–±–∫–∏:', error.name);
      if (error.original) {
        console.error('–ö–æ–¥ –æ—à–∏–±–∫–∏:', error.original.errno);
        console.error('SQL —Å–æ–æ–±—â–µ–Ω–∏–µ:', error.original.sqlMessage);
      }
      throw error;
    }
  },

  async down(queryInterface, Sequelize) {
    return queryInterface.bulkDelete('assignments', null, {});
  }
};
